\documentclass[paper=a4, fontsize=11pt]{scrartcl}
%\usepackage{sectsty} % Allows for custom section title styling
\usepackage[T1]{fontenc}
\usepackage{fourier} % We're using the Utopia font because it's great.
\usepackage{enumerate} % Allows for custom enumeration types
\usepackage{tikz} % Graphics powered by TikZ!
\usepackage{xcolor} % More colors
\usepackage{listings} % For shell output
\usepackage{nameref} % Reference sections by name, since we're avoiding section numbering

\usetikzlibrary{positioning} % Relative positioning of nodes
\usetikzlibrary{automata} % Handy stuff for state machine diagrams

\tikzstyle{every state}=[fill=orange!30, draw=orange, very thick]
\tikzstyle{lock}=[->, draw=cyan, very thick, every to/.style={bend left=20}]
\tikzstyle{unlock}=[->, draw=magenta, very thick, every to/.style={bend left=20}]

\lstdefinestyle{ShellStyle} {
  basicstyle=\small\ttfamily,
  numbers=none,
  frame=tblr,
  columns=fullflexible,
  backgroundcolor=\color{blue!10},
  linewidth=0.9\linewidth,
  xleftmargin=0.1\linewidth
}

%\allsectionsfont{\centering \normalfont\scshape} % Center and semi-cap section titles
\newcommand{\horrule}[1]{\rule{\linewidth}{#1}} % Horizontal rule with weight arg

\title{
  \normalfont \normalsize 
  \textsc{New Mexico Tech} \\ [25pt]
  \horrule{0.5pt} \\[0.4cm]
  \huge CSE 325 --- Lab Project 5 \\ Memory Management \\
  \horrule{2pt} \\[0.5cm]
}

\author{Rob Kelly \& Ian Neal \\ SANIC TEEM}
\date{\normalsize\today}

\begin{document}
\maketitle

%%% INTRODUCTION %%%
The SANIC TEEM Maniac Middle Management Memory Minder (hereafter referred to as \textit{the project}) is a highly-configurable simulated memory manager with a number of different contiguous memory allocation strategies available for use. Specifically, these allocation strategies are as follows:

\begin{description}
  \item[First Fit], which will allocate the suitable\footnote{Here, a ``suitable'' block is a block that is not currently allocated and is large enough to fit the new data.} block that is sequentially first in memory,

  \item[Best Fit], which will allocate the smallest suitable block,

  \item[Worst Fit], which will allocate the largest suitable block, and

  \item[Next Fit], which will allocate the suitable block that is sequentially first in memory \textbf{after the last block allocated,} wrapping around to the start of addressable space upon reaching the end.
\end{description}

Most of the codebase of this project was given as part of the lab assignment. We have implemented the functionality of the project in the following files:

\begin{itemize}
  \item Implementation of all described functionality in \texttt{mymem.c}.

  \item This README, the \LaTeX\hspace{0em} source of which may be found in \texttt{README.tex}.

  \item Build targets for the added files and this README in the \texttt{Makefile}.
\end{itemize}

%%% BUILDING %%%
\section*{Building}
\begin{itemize}
  \item \texttt{make} to build the project normally.

  \item \texttt{make test} to run the provided testing harness.
  \begin{itemize}
    \item \texttt{make test 2> /dev/null} to suppress error output during testing (does not suppress success or failure of tests). By design, the program will print an error message when memory allocation fails for any reason. The provided stress test will sometimes attempt to allocate more memory than will fit in any existing block, which will fail and produce an error as expected. Use this command to prevent stderr from getting spammed.
  \end{itemize}

  \item \texttt{make doc} to build this README. Requires \texttt{pdflatex} and a number of \LaTeX\hspace{0em} packages, all of which are included in the popular \textbf{TeX Live} distribution.

  \item \texttt{make clean} to clean up temporary files, build files, and output.
\end{itemize} 

%%% USAGE %%%
% Taken from memorytests.c:main()
\section*{Usage}
\texttt{mem -test <test> <strategy>}

\begin{itemize}
  \item \texttt{test} is the test to run, which may be \texttt{alloc1}, \texttt{alloc2}, \texttt{alloc3}, \texttt{alloc4}, \texttt{stress}, or \texttt{all} as desired.

  \item \texttt{strategy} is the memory allocation strategy to use, which may be \texttt{first}, \texttt{best}, \texttt{worst}, \texttt{next}, or \texttt{all} as desired. These correspond to the first fit, best fit, worst fit, and next fit strategies (or all of the above) respectively.
\end{itemize}

%%% EXAMPLES %%%
\section*{Examples}
\begin{lstlisting}[style=ShellStyle]
$ ./mem -test all all 2> /dev/null
Running tests...
 1.alloc1              ::pass
 2.alloc2              ::pass
 3.alloc3              ::pass
 4.alloc4              ::pass
 5.stress              ::pass

Test Results:5 tests,5 passed,0 failed.
\end{lstlisting}

%%% DESIGN %%%
\section*{Design \& Implementation}
% Be sure and update this as we make progress...
\subsection*{Organization}


%% \begin{figure}[h]
%%   \centering
%%   \begin{tikzpicture}[node distance = 2cm, auto]
%%     \node         (insert)                                     {\texttt{enter\_sched\_queue}};
%%     \node[state]  (production)  [below left = of insert]       {\phantom{-}\textit{production}\phantom{-}};
%%     \node[state]  (consumption) [below right = of insert]      {\textit{consumption}};
%%     \node         (remove)      [below left = of consumption]  {\texttt{leave\_sched\_queue}};
%%     \node         (wait)        [below right = of consumption] {\texttt{wait\_for\_queue}};

%%     \draw[lock]   (production)  to (insert);
%%     \draw[unlock] (insert)      to (consumption);
%%     \draw[lock]   (consumption) to (remove);
%%     \draw[unlock] (remove)      to (production);
%%     \draw[lock]   (consumption) to (wait);
%%     \draw[unlock] (wait)        to (consumption);
%%   \end{tikzpicture}
%%   \caption{Scheduling queue capacity synchronization.}
%%   \label{fig:qsync}
%% \end{figure}

%%% BUGS %%%
\section*{Known Bugs}
The code for which SANIC TEEM is responsible (contained in \texttt{mymem.c}) has no known bugs or memory leaks. There appear to be memory leaks present in the provided code, which we have made no effort to patch.

\end{document}
